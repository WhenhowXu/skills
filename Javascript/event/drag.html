<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>元素拖拽移动</title>
    <style>
        .draggable-box {
            position: absolute;
            width: 50px;
            height: 50px;
            text-align: center;
            line-height: 50px;
            background-color: orange;
            color: #fff;
        }

        .box2 {
            background-color: red;
            left: 300px;
            top: 100px;
        }
        .container{
            width: 600px;
            height: 600px;
            border: 1px solid #ccc;
        }
    </style>
</head>

<body>
    <div class="draggable-box box1">1</div>
    <div class="container">
        <div class="draggable-box box2">2</div>
    </div>

    <script>
        (function () {
            class CreateDragElement {
                constructor(el, { } = {}) {
                    if (!el) {
                        throw Error('拖拽元素不存在')
                        return
                    }
                    this.dragElement = el;
                    this.dragging = false;
                    this.dragData = {};
                    this.init();
                }
                on(el, type, handler, useCapture = false) {
                    el.addEventListener(type, handler || function () { }, useCapture)
                }
                off(el, type, handler, useCapture = false) {
                    el.removeEventListener(type, handler || function () { }, useCapture)
                }
                init() {
                    this.on(this.dragElement, 'mousedown', this.onMoveStart.bind(this))
                }
                onMoveStart(event) {
                    this.dragging = true;
                    this.on(window, 'mousemove', this.onMove.bind(this))
                    this.on(window, 'mouseup', this.onMoveEnd.bind(this))
                }
                onMove(event) {
                    if (!this.dragging) return;
                    this.dragElement.style.left = event.clientX + 'px'
                    this.dragElement.style.top = event.clientY + 'px'
                }
                onMoveEnd(event) {
                    this.dragging = false;
                    this.off(window, 'mousemove', this.onMove.bind(this))
                    this.off(window, 'mouseup', this.onMoveEnd)
                }
            }
            new CreateDragElement(document.querySelector('.draggable-box.box1'))
            new CreateDragElement(document.querySelector('.draggable-box.box2'))
        })()
    </script>
</body>

</html>